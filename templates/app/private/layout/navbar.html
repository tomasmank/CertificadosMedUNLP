<div id="navbar" class="border-bottom" style="background-color: #00889B;">
    <nav class="navbar justify-content-center navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand d-none d-sm-block" href="http://www.med.unlp.edu.ar">
                <img class="img-fluid" src="/static/assets/logos/fmed-unlp-logo.png" alt="Facultad de Medicina UNLP">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link {% if app.request.attributes.get('_route') == 'home' %}active{% endif %}"
                            aria-current="page" href={{path("home")}}>Inicio</a>
                    </li>

                    {% if is_granted(['ROLE_EVENTOS_VER', 'ROLE_EVENTOS_LISTAR', 'ROLE_EVENTOS_CREAR','ROLE_EVENTOS_MODIFICAR', 'ROLE_EVENTOS_ELIMINAR']) %}        
                        <li class="nav-item">
                            <a class="nav-link {% if app.request.attributes.get('_route') == 'events' %} active{% endif %}"
                                href={{path("events")}}>Eventos</a>
                        </li>
                    {% else %}
                        <li class="nav-item">
                            <a class="nav-link" title="Usuario no autorizado">Eventos</a>
                        </li>
                    {% endif %}            
                    
                    {% if is_granted(['ROLE_TEMPLATES_VER', 'ROLE_TEMPLATES_LISTAR', 'ROLE_TEMPLATES_CREAR','ROLE_TEMPLATES_MODIFICAR', 'ROLE_TEMPLATES_ELIMINAR']) %}        
                        <li class="nav-item">
                            <a class="nav-link {% if app.request.attributes.get('_route') == 'templates' %} active{% endif %}"
                                href={{path("templates")}}>Templates</a>
                        </li>
                    {% else %}
                        <li class="nav-item">
                            <a class="nav-link" title="Usuario no autorizado" >Templates</a>
                        </li>
                    {% endif %}
                  
                    {% if is_granted(['ROLE_USUARIOS_VER', 'ROLE_USUARIOS_LISTAR', 'ROLE_USUARIOS_CREAR','ROLE_USUARIOS_MODIFICAR', 'ROLE_USUARIOS_ELIMINAR']) %}        
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown2" role="button"
                                        data-bs-toggle="dropdown" aria-expanded="false">Administrar</a>
                            <ul class="dropdown-menu" aria-labelledby="navbarDropdown2">
                                <li>
                                    <a class="dropdown-item" href={{path("users")}}>Usuarios</a>
                                </li>
                                <li>
                                    <hr class="dropdown-divider">
                                </li>
                                <li>
                                    <a class="dropdown-item" href={{path("profile")}}>Roles de usuario</a>
                                </li>
                            </ul>
                        </li>
                    {% else %}
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown2" role="button"
                                        data-bs-toggle="dropdown" aria-expanded="false" title="Usuario no autorizado" disabled>Administrar</a>
                        </li>
                    {% endif %}
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            {% if app.user %}
                            {{ app.user.username }}
                            {% else %}
                            Anonimo
                            {% endif %}
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" href="{{ path('detailCurrentUser') }}">Mi perfil</a></li>
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li>
                                <a href="" class="dropdown-item" data-bs-toggle="modal" data-bs-target="#logoutModal">
                                    Cerrar sesión
                                </a>

                            </li>
                        </ul>
                    </li>
                </ul>

                <!--MODAL Cerrar Sesión-->
                <div class="modal fade" id="logoutModal" tabindex="-1" aria-labelledby="logoutModalLabel"
                    aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="logoutModalLabel">Cerrar sesión</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                {% if app.user %}
                                <p>Usuario actual: {{ app.user.username }}</p>
                                {% endif %}
                                <p>¿Está seguro/a que desea cerrar sesión?</p>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary"
                                    data-bs-dismiss="modal">Cancelar</button>
                                <a href="{{ path('app_logout') }}" type="button" class="btn btn-danger">Cerrar
                                    sesión</a>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </nav>
</div>